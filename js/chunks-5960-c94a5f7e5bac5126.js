(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5960],{46601:function(){},99647:function(e,t,n){"use strict";n.d(t,{o:function(){return o}});var r=n(72650),a=n(54559),i=n(2265);let o=e=>e?{marketCapFrom:!e.marketCapFrom||Number.isNaN(Number(e.marketCapFrom))?null:Number(e.marketCapFrom),marketCapTo:!e.marketCapTo||Number.isNaN(Number(e.marketCapTo))?null:Number(e.marketCapTo),volumeFrom:!e.volumeFrom||Number.isNaN(Number(e.volumeFrom))?null:Number(e.volumeFrom),volumeTo:!e.volumeTo||Number.isNaN(Number(e.volumeTo))?null:Number(e.volumeTo),numHoldersFrom:!e.numHoldersFrom||Number.isNaN(Number(e.numHoldersFrom))?null:Number(e.numHoldersFrom),numHoldersTo:!e.numHoldersTo||Number.isNaN(Number(e.numHoldersTo))?null:Number(e.numHoldersTo)}:{};t.Z=()=>{let{decodedJwt:e}=(0,r.U)();return{handleCoinClick:(0,i.useCallback)(async(t,n,r)=>{if(!e||void 0===n)return;let i={coinId:t,itemPosition:n.itemPosition,screenWidth:n.screenWidth,origin:n.origin,sortBy:n.sortBy,wasAnimationOn:n.wasAnimationOn,sessionId:n.sessionId,pageNumber:n.pageNumber,marketCap:n.marketCap,createdAt:new Date().toISOString(),forYouData:n.forYouData,searchTerm:r};try{await fetch("".concat((0,a.o)(),"/activity/click"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})}catch(e){console.error("Error activity click:",e)}},[e]),handleCoinClickAdvanced:(0,i.useCallback)(async(t,n,r)=>{if(!e||void 0===n)return;let i={coinId:t,createdAt:new Date().toISOString(),filters:o(r),itemPosition:n.itemPosition,marketCap:n.marketCap,volume:n.volume,numHolders:n.numHolders,screenWidth:n.screenWidth,sessionId:n.sessionId,batchId:n.batchId,isOwned:n.isOwned};try{await fetch("".concat((0,a.o)(),"/activity/click-advanced"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})}catch(e){console.error("Error activity click:",e)}},[e])}}},49340:function(e,t,n){"use strict";n.d(t,{a:function(){return o}});var r=n(54559),a=n(63861);let i=e=>fetch(e).then(e=>e.json()),o=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{data:n,error:o,mutate:s,isLoading:c}=(0,a.ZP)(t&&e?"".concat((0,r.o)(),"/users/").concat(e):null,i,{revalidateOnFocus:!1,dedupingInterval:3e5});return{user:n,error:o,fetchUser:s,isLoading:c}}},90225:function(e,t,n){"use strict";n.d(t,{IpfsPrefixProvider:function(){return l},y:function(){return s}});var r=n(57437),a=n(2265),i=n(25566);let o=(0,a.createContext)({ipfsPrefix:"https://ipfs.io/ipfs/",findIpfsPrefix:()=>{}}),s=()=>(0,a.useContext)(o),c=i.env.NEXT_PUBLIC_IPFS_PROVIDER||"https://pump.mypinata.cloud/ipfs/",l=e=>{let{children:t}=e,[n,i]=(0,a.useState)(c),s=async()=>{let e="QmXeG5tTjC63hjTF7a4GcUyetE6yPcsR4rBzX7wb8mmpzg",t=["https://ipfs.io/ipfs/","https://gateway.pinata.cloud/ipfs/"];await fetch("".concat(c).concat(e)).then(e=>e.json()).then(e=>{i(c)}).catch(n=>{console.error(n),t.forEach(async t=>{let n=await fetch("".concat(t).concat(e)).then(e=>e.json());(null==n?void 0:n.name)&&i(e=>e!==c?e:t)})})};return(0,a.useEffect)(()=>{s()},[]),(0,r.jsx)(o.Provider,{value:{ipfsPrefix:n,findIpfsPrefix:s},children:t})}},71589:function(e,t,n){"use strict";n.d(t,{LastClickImpressionProvider:function(){return o},s:function(){return s}});var r=n(57437),a=n(2265);let i=(0,a.createContext)(void 0),o=e=>{let{children:t}=e,[n,o]=(0,a.useState)(null),[s,c]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let e=localStorage.getItem("lastClickAdvancedImpression");e&&c(JSON.parse(e))},[]),(0,r.jsx)(i.Provider,{value:{lastClickImpression:n,setLastClickImpression:(e,t,n)=>{let r={mint:e,impression:t,searchTerm:n};o(r),localStorage.setItem("lastClickImpression",JSON.stringify(r))},lastAdvancedClickImpression:s,setLastClickAdvancedImpression:(e,t,n)=>{let r={mint:e,impression:t,filters:n};c(r),localStorage.setItem("lastClickAdvancedImpression",JSON.stringify(r))}},children:t})},s=()=>{let e=(0,a.useContext)(i);if(!e)throw Error("useLastClickImpression must be used within a LastClickImpressionProvider");return e}},72650:function(e,t,n){"use strict";n.d(t,{ProfileProvider:function(){return I},U:function(){return C}});var r=n(57437),a=n(49340),i=n(54559),o=n(11166),s=n(13786),c=n(29690),l=n(93140),u=n(61099),d=n(15408),f=n(6832),m=n(46842),h=n(64024),p=n(59147),g=n.n(p),w=n(2265),v=n(72694),b=n(98754);let y=(0,w.createContext)({}),C=()=>(0,w.useContext)(y),I=e=>{let{children:t}=e,[n,p]=(0,w.useState)(!1),[C,I]=(0,w.useState)(!1),{signMessage:k,publicKey:N,disconnect:S}=(0,d.O)(),T=(0,f.z)(),{logout:E,authenticated:O}=(0,c.h)(),{createWallet:P,wallets:j}=(0,l.u)(),x=j.find(e=>"privy"===e.walletClientType),{login:F}=(0,u.n)({onComplete:async e=>{I(!1);let t=e.linkedAccounts.find(e=>"wallet"===e.type&&"privy"===e.walletClientType&&"solana"===e.chainType);if(t)try{await K(t.address)}catch(e){if(e instanceof b.Wj&&e.errorName===b.Pp)throw await E(),I(!0),e;throw new b.Wj(b.s2,"Failed to login",e)}t||await P()}}),[R,A]=(0,m._)("decoded-jwt",null),[W,H]=(0,v._)("last-sort-update",0),D=O?null==x?void 0:x.address:null==R?void 0:R.address,J=!O&&!!(N&&!R),{user:L,fetchUser:_}=(0,a.a)(D),[B,G]=(0,w.useState)(!1),V=async(e,t)=>{let n=[];for(let r of t)n.push(await e.signTransaction(r));return n},M=x?{publicKey:new h.PublicKey(x.address),signAllTransactions:async e=>await V(x,e),...x}:void 0,U=O?M:T,Z=async()=>{O&&await E(),await S(),await fetch("".concat((0,i.o)(),"/auth/logout"),{method:"POST",credentials:"include"}).then(e=>e.json()),A(null),H(0)},z=(e,t)=>{if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((e,t)=>e===r[t])},X=async()=>{try{let e=await fetch("".concat((0,i.o)(),"/eras"),{method:"GET"});if(!e.ok)return console.error("getEras: ".concat(e.status)),null;return await e.json()}catch(e){return console.error("getEras:",e),null}},Y=async e=>{if(null!=e&&(null==R?void 0:R.eras)&&!z(e,R.eras.map(e=>e.era))){Z();return}try{let e=await fetch("".concat((0,i.o)(),"/auth/my-profile"),{method:"GET",credentials:"include"});if(!e.ok){H(0),A(null);return}let t=await e.json();JSON.stringify(R)!==JSON.stringify(t)&&A(t)}catch(e){console.error(e),H(0),A(null)}},K=async e=>{let t=await fetch("".concat((0,i.o)(),"/check/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(t.ok&&405===(await t.json()).statusCode)throw new b.Wj(b.Pp,"Wallet connection unsuccessful")},Q=async(e,t)=>{if(!t||!e)throw Error("Wallet not connected");let n=Date.now(),r=g().encode(await t(new TextEncoder().encode("Sign in to pump.fun: ".concat(n)))),a=await fetch("".concat((0,i.o)(),"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({address:e,signature:r,timestamp:n})});if(!a.ok&&405==a.status)throw O&&(I(!0),await E()),await S(),new b.Wj(b.Pp,"Wallet connection unsuccessful")},q=async()=>{p(!0);try{await Q(null==N?void 0:N.toBase58(),k),await Y()}catch(e){if(e instanceof b.Wj)throw e;throw new b.Wj(b.s2,"Failed to login",e)}finally{p(!1)}};return(0,w.useEffect)(()=>{(async()=>{if(C)console.error("Privy Wallet got disconnected - not signing in");else{let e=j.find(e=>"privy"===e.walletClientType);e&&(!R||R.address!==e.address)&&(await Q(e.address,e.signMessage),await Y())}})()},[j,C]),(0,w.useEffect)(()=>{(async()=>{let e=await X();await Y(e)})()},[]),(0,w.useEffect)(()=>{let e=()=>{let e=(0,o.dk)();return e&&G(!0),e};e();let t=setInterval(()=>{e()&&clearInterval(t)},2e3);return()=>clearInterval(t)},[]),(0,w.useEffect)(()=>{D&&((0,s.sendGTMEvent)({user_id:D}),B&&(0,o.u8)("setIdentity",{uid:D}))},[D,B]),(0,w.useEffect)(()=>{if(R){if(1e3*R.exp<Date.now()){H(0),A(null);return}fetch("".concat((0,i.o)(),"/users/register"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({address:R.address})})}},[R]),(0,r.jsx)(y.Provider,{value:{decodedJwt:R,login:q,privyLogin:F,privyLoginFailed:C,loginLoading:n,address:D,user:L,roles:null==R?void 0:R.roles,fetchUser:_,logout:Z,requiresLogin:J,wallet:U,shouldUsePrivy:O},children:t})}},86083:function(e,t,n){"use strict";n.d(t,{SeenCoinsObserverProvider:function(){return u},d:function(){return d}});var r=n(57437),a=n(99647),i=n(72650),o=n(54559),s=n(2265),c=n(28970);let l=(0,s.createContext)({observe:()=>{},unobserve:()=>{},observeTableRow:()=>{},unobserveTableRow:()=>{},addSeenCoin:()=>{},addSeenAdvancedCoin:()=>{},generateNewSession:()=>{},logSeenCoins:()=>{},logSeenAdvancedCoins:()=>{},notifyPageOrFilterChange:()=>{},sessionId:null,batchId:null,getCurrentBatchId:()=>({id:"",expiresAt:0})}),u=e=>{let{children:t}=e,n=(0,s.useRef)(null),u=(0,s.useRef)(new Map),d=(0,s.useRef)(new Set),f=(0,s.useRef)(null),[m,h]=(0,s.useState)([]),[p,g]=(0,s.useState)([]),[w,v]=(0,s.useState)(null),[b,y]=(0,s.useState)(null),C=(0,s.useRef)(null),I=(0,s.useRef)(0),k=(0,s.useRef)(0),N=(0,s.useRef)(0),[S,T]=(0,s.useState)(!1),E=(0,s.useCallback)(()=>{T(!0),setTimeout(()=>{T(!1)},1e3),setTimeout(()=>{u.current.forEach((e,t)=>{if(t){let n=t.getBoundingClientRect();n.top>=0&&n.bottom<=window.innerHeight&&(e.callback({target:t}),d.current.add(e.coinId),u.current.set(t,{...e,isVisible:!0}))}})},1300)},[1e3]),{decodedJwt:O}=(0,i.U)(),P=()=>{let e=localStorage.getItem("batchId");if(!e)return null;try{let t=JSON.parse(e);if(t.expiresAt<Date.now())return localStorage.removeItem("batchId"),null;return t}catch(e){return localStorage.removeItem("batchId"),null}},j=()=>{let e={id:(0,c.Z)(),expiresAt:Date.now()+18e5};return localStorage.setItem("batchId",JSON.stringify(e)),e};(0,s.useEffect)(()=>{y(P()||j())},[]);let x=(0,s.useCallback)(()=>{if(!b||b.expiresAt<Date.now()){let e=j();return y(e),e}return b},[b]),F=(0,s.useCallback)(()=>x(),[x]),R=(0,s.useRef)(new Map);(0,s.useEffect)(()=>{if(O)return C.current=new IntersectionObserver(e=>{e.forEach(e=>{let t=R.current.get(e.target);if(t){let{coinId:n,callback:r,isVisible:a}=t,i=e.boundingClientRect,o=i.top>=0&&i.bottom<=window.innerHeight&&i.left>=0&&i.right<=window.innerWidth;e.isIntersecting&&!a&&o?(!d.current.has(n)&&N.current<.2&&(r(e),d.current.add(n)),R.current.set(e.target,{coinId:n,callback:r,isVisible:!0})):!e.isIntersecting&&a&&(R.current.set(e.target,{coinId:n,callback:r,isVisible:!1}),d.current.delete(n))}})},{threshold:.5,rootMargin:"0px"}),()=>{var e;null===(e=C.current)||void 0===e||e.disconnect()}},[O]);let A=(0,s.useCallback)((e,t,n)=>{if(C.current&&e){C.current.observe(e);let r=e.getBoundingClientRect(),a=r.top>=0&&r.bottom<=window.innerHeight&&r.left>=0&&r.right<=window.innerWidth;R.current.set(e,{coinId:t,callback:n,isVisible:a}),a&&!d.current.has(t)&&N.current<.2&&(n({target:e}),d.current.add(t))}},[]),W=(0,s.useCallback)(e=>{C.current&&e&&(C.current.unobserve(e),R.current.delete(e))},[]);(0,s.useEffect)(()=>{H()},[]);let H=(0,s.useCallback)(()=>{{let e=(0,c.Z)();localStorage.setItem("sessionId",e),v(e),u.current.clear(),d.current.clear()}},[]);(0,s.useEffect)(()=>{if(O)return n.current=new IntersectionObserver(e=>{e.forEach(e=>{let t=u.current.get(e.target);if(t){let{coinId:n,callback:r,isVisible:a}=t;e.isIntersecting&&!a?(!d.current.has(n)&&N.current<.2&&(r(e),d.current.add(n)),u.current.set(e.target,{coinId:n,callback:r,isVisible:!0})):!e.isIntersecting&&a&&(u.current.set(e.target,{coinId:n,callback:r,isVisible:!1}),d.current.delete(n))}})},{threshold:1}),()=>{var e;null===(e=n.current)||void 0===e||e.disconnect()}},[O]);let D=(0,s.useCallback)((e,t,r)=>{if(n.current&&e){n.current.observe(e);let a=e.getBoundingClientRect().top>=0&&e.getBoundingClientRect().bottom<=window.innerHeight;u.current.set(e,{coinId:t,callback:r,isVisible:a}),a&&!d.current.has(t)&&N.current<.2&&(r({target:e}),d.current.add(t))}},[]),J=(0,s.useCallback)(e=>{n.current&&e&&(n.current.unobserve(e),u.current.delete(e))},[]),L=(0,s.useCallback)(()=>{let e=window.scrollY,t=Date.now(),n=Math.abs(e-I.current),r=t-k.current;r>0&&(N.current=n/r),I.current=e,k.current=t,f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{N.current=0,u.current.forEach((e,t)=>{if(t&&!d.current.has(e.coinId)){let n=t.getBoundingClientRect();n.top>=0&&n.bottom<=window.innerHeight&&(e.callback({target:t}),d.current.add(e.coinId),u.current.set(t,{...e,isVisible:!0}))}})},200)},[]);(0,s.useEffect)(()=>(window.addEventListener("scroll",L),()=>{window.removeEventListener("scroll",L)}),[]);let _=(0,s.useCallback)(e=>{S||h(t=>t.some(t=>t.coinId===e.coinId&&t.sessionId===e.sessionId)?t:[...t,e])},[S]),B=(0,s.useCallback)(e=>{g(t=>t.some(t=>t.coinId===e.coinId&&t.sessionId===e.sessionId)?t:[...t,e])},[]),G=async(e,t)=>{if(e.length>40){t(),u.current.clear(),d.current.clear();return}if(O&&0!==e.length)try{await fetch("".concat((0,o.o)(),"/activity/seen"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({coins:e})}),t()}catch(e){console.error("Error logging seen coins:",e)}},V=async(e,t)=>{if(e.length>40){t(),u.current.clear(),d.current.clear();return}if(!O||0===e.length)return;let n=e.map(e=>({...e,filters:(0,a.o)(e.filters)}));try{await fetch("".concat((0,o.o)(),"/activity/seen-advanced"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({coins:n})}),t()}catch(e){console.error("Error logging seen coins:",e)}};(0,s.useEffect)(()=>{let e=setInterval(()=>{G(m,()=>h([]))},1e3);return()=>clearInterval(e)},[m,O]),(0,s.useEffect)(()=>{let e=setInterval(()=>{V(p,()=>g([]))},1e3);return()=>clearInterval(e)},[p,O]);let M=(0,s.useCallback)(async()=>{await G(m,()=>h([]))},[m,O]),U=(0,s.useCallback)(async()=>{console.log("seenAdvancedCoin: ",p),await V(p,()=>g([]))},[p,O]);return(0,r.jsx)(l.Provider,{value:{observe:D,unobserve:J,observeTableRow:A,unobserveTableRow:W,addSeenCoin:_,addSeenAdvancedCoin:B,generateNewSession:H,logSeenCoins:M,logSeenAdvancedCoins:U,sessionId:w,notifyPageOrFilterChange:E,batchId:b,getCurrentBatchId:F},children:t})},d=()=>(0,s.useContext)(l)},54559:function(e,t,n){"use strict";n.d(t,{o:function(){return r}});let r=()=>"https://frontend-api.pump.fun"},98754:function(e,t,n){"use strict";n.d(t,{Pp:function(){return r},Wj:function(){return i},s2:function(){return a}});let r="LOGIN_NOT_ALLOWED",a="LOGIN_FAILED";class i extends Error{constructor(e,t,n){super(),this.errorName=e,this.message=t,this.cause=n}}}}]);